# 实时通信

## 通信的种类
* 基于CS的通信：客户端<->服务器端
* 基于BS的通信：游览器<->服务器端

广义上来讲BS通信也算CS通信，因为游览器就是一个客户端，区别在于CS走的TCP协议，而BS走的HTTP协议，但是HTTP协议底层也是走TCP协议的，只是游览器通过HTTP协议和服务器端通信。

* CS通信一般是：客户端和服务器端使用socket进行连接通信，只要双方不断开，可以一直保持连接状态，通常称为长连接。这种通信方式通常属于全双工通信。
* BS通信一般时：游览器发起请求，服务器端接收到请求后发出响应给到游览器，游览器将最终结果呈现给用户。

## 通信的方式

* 全双工通信：发送方和接收方都可以主动发起信息给到对方，且可以同时双方同时发送信息。可以理解为有两根通道，一根用于A发送信息给B，一根用于B发送信息给A。常见例子为电话。
* 半双工通信：发送方和接收方都可以主动发起信息给到对方，但是不能同时发送。可以理解为只有一根同道，虽然可以由A发送给B，也可以由B发送给A，但是双方不能同时发送信息，常见的例子为对讲机。
* 单工通信：单工通信一般指数据只能由发送方发给接收方，而接收方无法发起信息给到发送方，常见的例子为收音机。

## BS通信的发展
在HTML5出来之前BS模式下，如果要实现实时通信，一般会采用轮询的方式，这种方式会产生很多TCP连接，对服务器压力较大。

之后出了长轮询的方式，这种方式减少了TCP连接，但是还是不够优雅。

后来有人想出了用iframe的隐藏帧实现了一个TCP连接可以一直维持下去，但是页面会一直显示在加载的状态。

直到HTML5出来之后，WebSocket进入大家的视野，越来越多的web服务器开始对WebSocket支持了。

## SignalR
SignalR是一款ASP.NET下非常流行的实时通信框架，可以基于游览器采用不同的机制来实现游览器与服务器端宿主程序的实时通信